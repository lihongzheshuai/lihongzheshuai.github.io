---
layout: post
title: 【GESP】C++三级练习 luogu-P5729 【深基5.例7】工艺品制作
date: 2025-06-15 08:00 +0800
author: OneCoder
comments: true
math: true
tags: [GESP, C++]
categories: [GESP, 四级]
---
GESP C++四级练习，二维/多维数组练习，难度★★☆☆☆。

<!--more-->

## luogu-P5729 【深基5.例7】工艺品制作

### 题目要求

#### 题目描述

>现有一个长宽高分别为 $w,x,h$ 组成的实心玻璃立方体，可以认为是由 $1\times1\times1$ 的数个小方块组成的，每个小方块都有一个坐标 $( i,j,k )$。现在需要进行 $q$ 次切割。每次切割给出 $(x_1,y_1,z_1),(x_2,y_2,z_2)$ 这 6 个参数，保证 $x_1\le x_2$，$y_1\le y_2$，$z_1\le z_2$；每次切割时，使用激光工具切出一个立方体空洞，空洞的壁平行于立方体的面，空洞的对角点就是给出的切割参数的两个点。
>
>换句话说，所有满足  $x_1\le i\le x_2$，$y_1\le j \le y_2$，$z_1\le k\le z_2$ 的小方块 $(i,j,k)$ 的点都会被激光蒸发。例如有一个  $4\times4\times 4$ 的大方块，其体积为 $64$；给出参数 $(1,1,1),(2,2,2)$ 时，中间的 $8$ 块小方块就会被蒸发，剩下 $56$ 个小方块。现在想知道经过所有切割操作后，剩下的工艺品还剩下多少格小方块的体积？

#### 输入格式

>第一行三个正整数 $w,x,h$。
>
>第二行一个正整数 $q$。
>
>接下来 $q$ 行，每行六个整数 $(x_1,y_1,z_1),(x_2,y_2,z_2)$。

#### 输出格式

>输出一个整数表示答案。

### 输入输出样例 #1

#### 输入 #1

```plaintext
4 4 4
1
1 1 1 2 2 2
```

#### 输出 #1

```plaintext
56
```

#### 说明/提示

数据保证，$1\le w,x,h\le 20$，$1 \leq q\le 100$。$1 \leq x_1 \leq x_2 \leq w$，$1 \leq y_1\leq y_2 \leq x$，$1 \leq z_1 \leq z_2 \leq h$。

---

### 题目分析

#### 解题思路

本题的解题思路如下：

1. 问题本质：
   - 给定一个 $w \times x \times h$ 的立方体，由 $1 \times 1 \times 1$ 的小方块组成
   - 需要进行 $q$ 次切割操作，每次切割会移除一个矩形区域内的小方块
   - 计算所有切割后剩余的小方块数量

2. 解题思路：
   - 问题建模
     - 将立方体抽象为三维空间中的点阵
     - 每个点表示一个 $1 \times 1 \times 1$ 的小方块
     - 初始状态所有点都存在，切割后部分点被移除
   - 数据结构设计
     - 使用三维数组表示立方体空间 `array[25][25][25]`
     - 数组元素值：1表示小方块存在，0表示被切除
     - 考虑到题目范围(1-20)，预留足够空间(25)
   - 处理流程
     1. 初始化：将所有位置设为1，表示小方块存在
     2. 切割操作：
        - 输入两个对角点，确定切割区域
        - 将区域内所有点设为0，表示被切除
        - 多次切割同一区域时保持为0
     3. 结果统计：
        - 遍历整个空间，统计值为1的点
        - 累加和即为剩余小方块数量
   - 注意事项
     - 坐标系从1开始计数，不是0
     - 切割区域可能重叠，需要正确处理重复切割
     - 所有操作都在给定的长方体范围内进行

3. 复杂度分析：
   - 时间复杂度：$O(w \times x \times h + q \times V)$，其中$V$为每次切割的体积
   - 空间复杂度：$O(w \times x \times h)$，需要一个三维数组存储立方体状态

{% include custom/custom-post-content-inner.html %}

---

### 示例代码

```cpp
#include <cmath>
#include <iostream>

// 定义一个三维数组来表示立方体，每个元素表示一个小方块是否存在(1存在,0不存在)
int array[25][25][25];
int main() {
    // 输入立方体的长宽高
    int w, x, h;
    std::cin >> w >> x >> h;
    
    // 初始化立方体，所有小方块都存在
    for (int i = 1; i <= w; i++) {
        for (int j = 1; j <= x; j++) {
            for (int k = 1; k <= h; k++) {
                array[i][j][k] = 1;
            }
        }
    }
    
    // 输入切割次数
    int q;
    std::cin >> q;
    int count = 0;
    
    // 进行q次切割操作
    for (int i = 0; i < q; i++) {
        // 输入每次切割的两个对角点坐标
        int x1, y1, z1, x2, y2, z2;
        std::cin >> x1 >> y1 >> z1 >> x2 >> y2 >> z2;

        // 将切割区域内的小方块标记为0（被切除）
        for (int j = x1; j <= x2; j++) {
            for (int k = y1; k <= y2; k++) {
                for (int l = z1; l <= z2; l++) {
                    array[j][k][l] = 0;
                }
            }
        }
    }
    
    // 统计剩余小方块的数量
    for (int j = 1; j <= w; j++) {
        for (int k = 1; k <= x; k++) {
            for (int l = 1; l <= h; l++) {
                count += array[j][k][l];
            }
        }
    }
    
    // 输出结果
    std::cout << count;
    return 0;
}                 
```

---

{% include custom/custom-post-content-footer.md %}
